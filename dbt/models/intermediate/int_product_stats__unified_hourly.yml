version: 2

models:
  - name: int_product_stats__unified_hourly
    description: "Unified hourly stats from all sources (TVL, APY, breakdowns, LPS, yield, harvest). Uses UNION ALL + CoalescingMergeTree for better performance."
    columns:
      - name: tvl_usd
        description: "Total value locked in USD"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000
                inclusive: true
      - name: apy
        description: "APY percentage"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: compoundings_per_year
        description: "Number of compoundings per year"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000
                inclusive: true
      - name: beefy_performance_fee
        description: "Beefy performance fee"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000
                inclusive: true
      - name: lp_fee
        description: "LP fee"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000
                inclusive: true
      - name: total_apy
        description: "Total APY"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: vault_apr
        description: "Vault APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: trading_apr
        description: "Trading APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: clm_apr
        description: "CLM APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: reward_pool_apr
        description: "Reward pool APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: reward_pool_trading_apr
        description: "Reward pool trading APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: vault_apy
        description: "Vault APY"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: liquid_staking_apr
        description: "Liquid staking APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: composable_pool_apr
        description: "Composable pool APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: merkl_apr
        description: "Merkl APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: linea_ignition_apr
        description: "Linea ignition APR"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: lp_price
        description: "LP token price"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: total_supply
        description: "Total supply"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000000
                inclusive: true
      - name: underlying_liquidity
        description: "Underlying liquidity"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000000
                inclusive: true
      - name: underlying_price
        description: "Underlying price"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: underlying_amount_compounded
        description: "Underlying amount compounded"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000000
                inclusive: true
      - name: underlying_token_price_usd
        description: "Underlying token price in USD"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000
                inclusive: true
      - name: underlying_amount_compounded_usd
        description: "Underlying amount compounded in USD"
        tests:
          - dbt_utils.accepted_range:
              arguments:
                min_value: 0
                max_value: 1000000000000
                inclusive: true
